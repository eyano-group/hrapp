import{c as He,r as _e,u as Le,j as t,H as Ie,L as qe}from"./app-BMwTLKbs.js";import{b as ze,B as oe,I as Se,L as Ce}from"./label-BXoGoh2j.js";import{c as Ae,S as Te,d as De,b as Oe,j as Pe,C as Be,a as Fe,e as Re,f as Ge,g as Je,i as Ke}from"./dialog-DXsLLGUd.js";import{t as de}from"./index-CGTlIyYz.js";import{C as Ee,a as Me}from"./clock-DWACI47m.js";/* empty css            */const Qe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ue=ze("ArrowLeft",Qe);function at($e){const e=He.c(118),{driver:a,history:R}=$e,[n,ke]=_e.useState(null),[ce,o]=_e.useState(!1);let G;e[0]!==a.id?(G={driver_id:a.id,date:"",time:"",type:"arrival"},e[0]=a.id,e[1]=G):G=e[1];const{data:r,setData:l,post:me,put:xe,processing:J,reset:fe,errors:i}=Le(G);let K;e[2]!==a.id||e[3]!==l?(K=()=>{ke(null),l({driver_id:a.id,date:new Date().toISOString().split("T")[0],time:new Date().toTimeString().split(" ")[0].slice(0,5),type:"arrival"}),o(!0)},e[2]=a.id,e[3]=l,e[4]=K):K=e[4];const d=K;let Q;e[5]!==a.id||e[6]!==l?(Q=s=>{ke(s),l({driver_id:a.id,date:s.date,time:s.time,type:s.type}),o(!0)},e[5]=a.id,e[6]=l,e[7]=Q):Q=e[7];const he=Q;let U;e[8]!==n||e[9]!==me||e[10]!==xe||e[11]!==fe?(U=s=>{s.preventDefault(),n?xe(route("attendance.update",n.id),{onSuccess:()=>{de.success("Pointage modifié avec succès"),o(!1)},onError:We}):me(route("attendance.storeManual"),{onSuccess:()=>{de.success("Pointage ajouté avec succès"),o(!1),fe("date","time")},onError:Ve})},e[8]=n,e[9]=me,e[10]=xe,e[11]=fe,e[12]=U):U=e[12];const ue=U,pe=`Historique - ${a.name}`;let c;e[13]!==pe?(c=t.jsx(Ie,{title:pe}),e[13]=pe,e[14]=c):c=e[14];let V;e[15]===Symbol.for("react.memo_cache_sentinel")?(V=route("dashboard"),e[15]=V):V=e[15];let W;e[16]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx(qe,{href:V,className:"flex h-10 w-10 items-center justify-center rounded-full text-slate-500 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800",children:t.jsx(Ue,{className:"h-5 w-5"})}),e[16]=W):W=e[16];let m;e[17]!==a.name?(m=t.jsx("h1",{className:"text-xl leading-tight font-bold text-slate-800 dark:text-white",children:a.name}),e[17]=a.name,e[18]=m):m=e[18];let x;e[19]!==a.matricule?(x=t.jsx("p",{className:"font-mono text-xs text-slate-500 dark:text-slate-400",children:a.matricule}),e[19]=a.matricule,e[20]=x):x=e[20];let f;e[21]!==x||e[22]!==m?(f=t.jsxs("div",{className:"flex items-center gap-4",children:[W,t.jsxs("div",{children:[m,x]})]}),e[21]=x,e[22]=m,e[23]=f):f=e[23];let X;e[24]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx(De,{className:"h-4 w-4"}),e[24]=X):X=e[24];let h;e[25]!==d?(h=t.jsxs(oe,{onClick:d,className:"hidden items-center gap-2 bg-purple-600 text-white shadow-lg shadow-purple-500/20 hover:bg-purple-700 md:flex",children:[X,"Ajouter présence"]}),e[25]=d,e[26]=h):h=e[26];let u;e[27]!==a.name?(u=a.name.charAt(0),e[27]=a.name,e[28]=u):u=e[28];let p;e[29]!==u?(p=t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-tr from-purple-600 to-blue-500 text-lg font-bold text-white shadow-lg",children:u}),e[29]=u,e[30]=p):p=e[30];let b;e[31]!==h||e[32]!==p?(b=t.jsxs("div",{className:"flex items-center gap-4",children:[h,p]}),e[31]=h,e[32]=p,e[33]=b):b=e[33];let g;e[34]!==f||e[35]!==b?(g=t.jsx("div",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/70 shadow-sm backdrop-blur-md dark:border-slate-800 dark:bg-slate-900/70",children:t.jsxs("div",{className:"container mx-auto flex h-20 items-center justify-between px-6",children:[f,b]})}),e[34]=f,e[35]=b,e[36]=g):g=e[36];let Y;e[37]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx(Oe,{className:"flex flex-row items-center justify-between",children:t.jsxs(Pe,{className:"flex items-center gap-2",children:[t.jsx(Me,{className:"h-5 w-5 text-purple-600"}),"Historique des présences"]})}),e[37]=Y):Y=e[37];let j;e[38]!==R||e[39]!==he?(j=R.length>0?R.map(s=>t.jsxs("div",{className:"group relative flex items-center justify-between rounded-xl border border-slate-100 bg-white p-4 shadow-sm transition-all hover:scale-[1.01] hover:shadow-md dark:border-slate-700 dark:bg-slate-800",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-full ${s.type==="arrival"?"bg-emerald-100 text-emerald-600":"bg-orange-100 text-orange-600"}`,children:s.type==="arrival"?t.jsx(Ae,{className:"h-6 w-6"}):t.jsx(Ee,{className:"h-6 w-6"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-lg font-bold text-slate-800 capitalize dark:text-white",children:s.type==="arrival"?"Arrivée":"Départ"}),t.jsx("p",{className:"text-sm text-slate-500",children:s.isToday?"Aujourd'hui":`Il y a ${s.daysAgo} jours`})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"font-mono text-xl font-bold text-slate-800 dark:text-white",children:s.time}),t.jsx("p",{className:"text-sm text-slate-500",children:s.date})]}),t.jsx(oe,{variant:"ghost",size:"icon",onClick:()=>he(s),className:"opacity-0 transition-opacity group-hover:opacity-100",children:t.jsx(Te,{className:"h-4 w-4 text-slate-400 hover:text-purple-600"})})]})]},s.id)):t.jsxs("div",{className:"py-12 text-center text-slate-400",children:[t.jsx(Me,{className:"mx-auto mb-4 h-16 w-16 opacity-20"}),t.jsx("p",{children:"Aucune présence enregistrée."})]}),e[38]=R,e[39]=he,e[40]=j):j=e[40];let v;e[41]!==j?(v=t.jsx("main",{className:"container mx-auto animate-in space-y-8 p-6 pb-32 duration-700 fade-in slide-in-from-bottom-4",children:t.jsxs(Be,{className:"border-none bg-white/50 shadow-lg backdrop-blur-sm dark:bg-slate-800/50",children:[Y,t.jsx(Fe,{children:t.jsx("div",{className:"flex flex-col gap-4",children:j})})]})}),e[41]=j,e[42]=v):v=e[42];let Z;e[43]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx(De,{className:"h-8 w-8 transition-transform duration-300 group-hover:rotate-90"}),e[43]=Z):Z=e[43];let N;e[44]!==d?(N=t.jsx("button",{onClick:d,className:"group fixed right-8 bottom-8 z-50 flex h-16 w-16 transform items-center justify-center rounded-full bg-purple-600 text-white shadow-[0_8px_30px_rgb(147,51,234,0.4)] transition-all duration-300 hover:scale-110 hover:bg-purple-700 active:scale-90 md:hidden",children:Z}),e[44]=d,e[45]=N):N=e[45];const be=n?"Modifier le pointage":"Nouveau pointage";let y;e[46]!==be?(y=t.jsx(Re,{children:t.jsx(Ge,{className:"text-center text-xl font-bold",children:be})}),e[46]=be,e[47]=y):y=e[47];let w;e[48]!==l?(w=()=>l("type","arrival"),e[48]=l,e[49]=w):w=e[49];const ge=`cursor-pointer rounded-2xl border-2 p-4 text-center transition-all ${r.type==="arrival"?"border-emerald-500 bg-emerald-50 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-400":"border-slate-100 bg-white hover:border-slate-200 dark:border-slate-700 dark:bg-slate-800"}`,je=`mx-auto mb-2 flex h-12 w-12 items-center justify-center rounded-full ${r.type==="arrival"?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-400 dark:bg-slate-700"}`;let ee;e[50]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx(Ae,{className:"h-6 w-6"}),e[50]=ee):ee=e[50];let k;e[51]!==je?(k=t.jsx("div",{className:je,children:ee}),e[51]=je,e[52]=k):k=e[52];let te;e[53]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx("span",{className:"font-bold",children:"Arrivée"}),e[53]=te):te=e[53];let _;e[54]!==w||e[55]!==ge||e[56]!==k?(_=t.jsxs("div",{onClick:w,className:ge,children:[k,te]}),e[54]=w,e[55]=ge,e[56]=k,e[57]=_):_=e[57];let S;e[58]!==l?(S=()=>l("type","departure"),e[58]=l,e[59]=S):S=e[59];const ve=`cursor-pointer rounded-2xl border-2 p-4 text-center transition-all ${r.type==="departure"?"border-orange-500 bg-orange-50 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400":"border-slate-100 bg-white hover:border-slate-200 dark:border-slate-700 dark:bg-slate-800"}`,Ne=`mx-auto mb-2 flex h-12 w-12 items-center justify-center rounded-full ${r.type==="departure"?"bg-orange-100 text-orange-600":"bg-slate-100 text-slate-400 dark:bg-slate-700"}`;let se;e[60]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx(Ee,{className:"h-6 w-6"}),e[60]=se):se=e[60];let C;e[61]!==Ne?(C=t.jsx("div",{className:Ne,children:se}),e[61]=Ne,e[62]=C):C=e[62];let ae;e[63]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx("span",{className:"font-bold",children:"Départ"}),e[63]=ae):ae=e[63];let A;e[64]!==S||e[65]!==ve||e[66]!==C?(A=t.jsxs("div",{onClick:S,className:ve,children:[C,ae]}),e[64]=S,e[65]=ve,e[66]=C,e[67]=A):A=e[67];let D;e[68]!==_||e[69]!==A?(D=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_,A]}),e[68]=_,e[69]=A,e[70]=D):D=e[70];let le;e[71]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx(Ce,{htmlFor:"date",children:"Date"}),e[71]=le):le=e[71];let E;e[72]!==l?(E=s=>l("date",s.target.value),e[72]=l,e[73]=E):E=e[73];let M;e[74]!==r.date||e[75]!==E?(M=t.jsx(Se,{id:"date",type:"date",value:r.date,onChange:E,required:!0,className:"border-slate-200 bg-slate-50 text-center font-mono"}),e[74]=r.date,e[75]=E,e[76]=M):M=e[76];let $;e[77]!==i.date?($=i.date&&t.jsx("p",{className:"text-sm text-red-500",children:i.date}),e[77]=i.date,e[78]=$):$=e[78];let H;e[79]!==M||e[80]!==$?(H=t.jsxs("div",{className:"space-y-2",children:[le,M,$]}),e[79]=M,e[80]=$,e[81]=H):H=e[81];let re;e[82]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx(Ce,{htmlFor:"time",children:"Heure"}),e[82]=re):re=e[82];let L;e[83]!==l?(L=s=>l("time",s.target.value),e[83]=l,e[84]=L):L=e[84];let I;e[85]!==r.time||e[86]!==L?(I=t.jsx(Se,{id:"time",type:"time",value:r.time,onChange:L,required:!0,className:"border-slate-200 bg-slate-50 text-center font-mono"}),e[85]=r.time,e[86]=L,e[87]=I):I=e[87];let q;e[88]!==i.time?(q=i.time&&t.jsx("p",{className:"text-sm text-red-500",children:i.time}),e[88]=i.time,e[89]=q):q=e[89];let z;e[90]!==I||e[91]!==q?(z=t.jsxs("div",{className:"space-y-2",children:[re,I,q]}),e[90]=I,e[91]=q,e[92]=z):z=e[92];let T;e[93]!==H||e[94]!==z?(T=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[H,z]}),e[93]=H,e[94]=z,e[95]=T):T=e[95];let ie;e[96]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(oe,{type:"button",variant:"outline",onClick:()=>o(!1),className:"w-full rounded-xl",children:"Annuler"}),e[96]=ie):ie=e[96];const ye=`w-full rounded-xl text-white ${r.type==="arrival"?"bg-emerald-600 hover:bg-emerald-700":"bg-orange-500 hover:bg-orange-600"}`,we=J?"Enregistrement...":n?"Modifier":"Enregistrer";let O;e[97]!==J||e[98]!==ye||e[99]!==we?(O=t.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[ie,t.jsx(oe,{type:"submit",disabled:J,className:ye,children:we})]}),e[97]=J,e[98]=ye,e[99]=we,e[100]=O):O=e[100];let P;e[101]!==ue||e[102]!==D||e[103]!==T||e[104]!==O?(P=t.jsxs("form",{onSubmit:ue,className:"space-y-6 pt-4",children:[D,T,O]}),e[101]=ue,e[102]=D,e[103]=T,e[104]=O,e[105]=P):P=e[105];let B;e[106]!==y||e[107]!==P?(B=t.jsxs(Je,{className:"max-w-md rounded-3xl border-slate-100 bg-white shadow-2xl dark:border-slate-800 dark:bg-slate-900",children:[y,P]}),e[106]=y,e[107]=P,e[108]=B):B=e[108];let F;e[109]!==ce||e[110]!==B?(F=t.jsx(Ke,{open:ce,onOpenChange:o,children:B}),e[109]=ce,e[110]=B,e[111]=F):F=e[111];let ne;return e[112]!==g||e[113]!==v||e[114]!==N||e[115]!==F||e[116]!==c?(ne=t.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans selection:bg-purple-100 dark:bg-slate-900 dark:selection:bg-purple-900",children:[c,g,v,N,F]}),e[112]=g,e[113]=v,e[114]=N,e[115]=F,e[116]=c,e[117]=ne):ne=e[117],ne}function Ve(){return de.error("Erreur lors de l'ajout")}function We(){return de.error("Erreur lors de la modification")}export{at as default};
